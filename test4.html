<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>اسلایدر با انیمیشن متن</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
        color: white;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
      }

      .container-sldr {
        max-width: 1400px;
        width: 100%;
        margin: 0 auto;
        padding: 20px;
      }

      .title-sldr {
        text-align: center;
        margin-bottom: 30px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      }

      .slider-wrapper-sldr {
        position: relative;
        width: 100%;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .slider-container-sldr {
        width: 100%;
        height: 450px;
        position: relative;
        flex: 1;
      }

      .slider-sldr {
        display: flex;
        width: 100%;
        height: 100%;
        gap: 10px;
        position: relative;
      }

      .frame-sldr {
        border-radius: 48px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        position: relative;
        transition: all 0.4s ease;
      }

      /* تنظیم عرض‌ها - حالا 7 قاب داریم */
      .frame-sldr:nth-child(1) {
        flex: 0.5;
      }
      .frame-sldr:nth-child(2) {
        flex: 1;
      }
      .frame-sldr:nth-child(3) {
        flex: 1;
      }
      .frame-sldr:nth-child(4) {
        flex: 8;
        z-index: 3;
      }
      .frame-sldr:nth-child(5) {
        flex: 1;
      }
      .frame-sldr:nth-child(6) {
        flex: 1;
      }
      .frame-sldr:nth-child(7) {
        flex: 0.5;
      }

      .frame-content-sldr {
        width: 100%;
        height: 100%;
        position: relative;
        overflow: hidden;
      }

      .frame-sldr img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        transition: transform 0.6s ease;
      }

      /* متن روی تصاویر */
      .image-text-sldr {
        position: absolute;
        bottom: 0;
        right: 0;
        left: 0;
        background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
        color: white;
        padding: 15px;
        transform: translateY(0);
        transition: all 0.6s ease;
      }

      /* استایل برای قاب‌های خیلی باریک */
      .frame-sldr:nth-child(1) .image-text-sldr,
      .frame-sldr:nth-child(7) .image-text-sldr {
        display: none; /* مخفی کردن متن در قاب‌های خیلی باریک */
      }

      .frame-sldr:nth-child(2) .image-text-sldr,
      .frame-sldr:nth-child(3) .image-text-sldr,
      .frame-sldr:nth-child(5) .image-text-sldr,
      .frame-sldr:nth-child(6) .image-text-sldr {
        padding: 6px;
        font-size: 0.7rem;
      }

      .frame-sldr:nth-child(2) .image-text-sldr h3,
      .frame-sldr:nth-child(3) .image-text-sldr h3,
      .frame-sldr:nth-child(5) .image-text-sldr h3,
      .frame-sldr:nth-child(6) .image-text-sldr h3 {
        font-size: 0.8rem;
        margin-bottom: 2px;
      }

      .frame-sldr:nth-child(2) .image-text-sldr p,
      .frame-sldr:nth-child(3) .image-text-sldr p,
      .frame-sldr:nth-child(5) .image-text-sldr p,
      .frame-sldr:nth-child(6) .image-text-sldr p {
        font-size: 0.6rem;
        opacity: 0.9;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .frame-sldr:nth-child(4) .image-text-sldr {
        padding: 20px;
      }

      .frame-sldr:nth-child(4) .image-text-sldr h3 {
        font-size: 1.4rem;
        margin-bottom: 8px;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
      }

      .frame-sldr:nth-child(4) .image-text-sldr p {
        font-size: 1rem;
        opacity: 0.95;
        line-height: 1.4;
      }

      /* افکت برای تصویر وسطی */
      .frame-sldr:nth-child(4) img {
        transform: scale(1.05);
      }

      /* دکمه‌های ناوبری */
      .nav-btn-sldr {
        position: relative;
        background: rgba(255, 255, 255, 0.2);
        border: none;
        color: white;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 1.5rem;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10;
      }

      .nav-btn-sldr:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: scale(1.1);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
      }

      .nav-btn-sldr:active {
        transform: scale(0.95);
      }

      .prev-btn-sldr {
        margin-left: 10px;
      }

      .next-btn-sldr {
        margin-right: 10px;
      }

      .description-sldr {
        text-align: center;
        margin-top: 30px;
        background: rgba(255, 255, 255, 0.1);
        padding: 20px;
        border-radius: 10px;
        backdrop-filter: blur(5px);
        line-height: 1.6;
      }

      .current-position-sldr {
        margin-top: 15px;
        font-size: 1.1rem;
        font-weight: bold;
      }

      .auto-play-sldr {
        margin-top: 15px;
      }

      .auto-play-sldr label {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        cursor: pointer;
      }

      /* انیمیشن حرکت تصاویر */
      .image-moving-sldr {
        animation: moveImage-sldr 0.8s ease-in-out forwards;
      }

      @keyframes moveImage-sldr {
        0% {
          transform: translateX(0) scale(var(--start-scale-sldr));
        }
        50% {
          transform: translateX(var(--move-x-sldr)) scale(1.1);
        }
        100% {
          transform: translateX(0) scale(var(--end-scale-sldr));
        }
      }

      /* انیمیشن‌های جدید برای ورود و خروج عکس‌ها */
      .image-exit-sldr {
        animation: imageExit-sldr 0.5s ease-in forwards;
      }

      @keyframes imageExit-sldr {
        0% {
          opacity: 1;
          transform: scale(1);
        }
        100% {
          opacity: 0;
          transform: scale(0.8);
        }
      }

      .image-enter-sldr {
        animation: imageEnter-sldr 0.6s ease-out 0.3s forwards;
      }

      @keyframes imageEnter-sldr {
        0% {
          opacity: 0;
          transform: scale(1.2);
        }
        70% {
          opacity: 0.8;
          transform: scale(0.95);
        }
        100% {
          opacity: 1;
          transform: scale(1);
        }
      }

      /* انیمیشن مخصوص عکس وسطی */
      .center-image-enter-sldr {
        animation: centerImageEnter-sldr 0.7s ease-out 0.3s forwards;
      }

      @keyframes centerImageEnter-sldr {
        0% {
          opacity: 0;
          transform: scale(1.3) rotate(-2deg);
        }
        60% {
          opacity: 0.9;
          transform: scale(0.98) rotate(1deg);
        }
        100% {
          opacity: 1;
          transform: scale(1.05) rotate(0deg);
        }
      }

      /* انیمیشن برای عکس‌های کناری */
      .side-image-enter-sldr {
        animation: sideImageEnter-sldr 0.5s ease-out 0.2s forwards;
      }

      @keyframes sideImageEnter-sldr {
        0% {
          opacity: 0;
          transform: translateX(20px) scale(0.9);
        }
        100% {
          opacity: 1;
          transform: translateX(0) scale(1);
        }
      }

      /* انیمیشن‌های متن - ورود */
      .text-slide-in-sldr {
        animation: textSlideIn-sldr 0.6s ease-out 0.3s both;
      }

      @keyframes textSlideIn-sldr {
        0% {
          transform: translateY(100%);
          opacity: 0;
        }
        100% {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .text-fade-in-sldr {
        animation: textFadeIn-sldr 0.8s ease-out 0.4s both;
      }

      @keyframes textFadeIn-sldr {
        0% {
          opacity: 0;
          transform: translateY(20px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .text-scale-in-sldr {
        animation: textScaleIn-sldr 0.7s ease-out 0.5s both;
      }

      @keyframes textScaleIn-sldr {
        0% {
          opacity: 0;
          transform: scale(0.8) translateY(20px);
        }
        100% {
          opacity: 1;
          transform: scale(1) translateY(0);
        }
      }

      /* انیمیشن مخصوص متن تصویر وسطی */
      .center-text-animation-sldr {
        animation: centerTextAppear-sldr 1s ease-out 0.4s both;
      }

      @keyframes centerTextAppear-sldr {
        0% {
          opacity: 0;
          transform: translateY(50px) scale(0.9);
        }
        60% {
          opacity: 0.8;
          transform: translateY(-10px) scale(1.02);
        }
        100% {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      /* انیمیشن برای متن‌های کناری */
      .side-text-animation-sldr {
        animation: sideTextAppear-sldr 0.5s ease-out 0.2s both;
      }

      @keyframes sideTextAppear-sldr {
        0% {
          opacity: 0;
          transform: translateX(30px);
        }
        100% {
          opacity: 1;
          transform: translateX(0);
        }
      }

      /* انیمیشن‌های خروج متن */
      .center-text-exit-sldr {
        animation: centerTextExit-sldr 0.5s ease-in both;
      }

      @keyframes centerTextExit-sldr {
        0% {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
        60% {
          opacity: 0.5;
          transform: translateY(-15px) scale(0.95);
        }
        100% {
          opacity: 0;
          transform: translateY(30px) scale(0.9);
        }
      }

      .side-text-exit-sldr {
        animation: sideTextExit-sldr 0.4s ease-in both;
      }

      @keyframes sideTextExit-sldr {
        0% {
          opacity: 1;
          transform: translateX(0);
        }
        100% {
          opacity: 0;
          transform: translateX(-30px);
        }
      }

      /* استایل برای قاب‌های خیلی باریک */
      .thin-frame-sldr {
        opacity: 0.6;
        filter: brightness(0.7);
      }
    </style>
  </head>
  <body>
    <div class="container-sldr">
      <h1 class="title-sldr">گالری آثار هنری</h1>

      <div class="slider-wrapper-sldr">
        <button class="nav-btn-sldr prev-btn-sldr" id="prevBtn-sldr">
          <i class="fas fa-chevron-right"></i>
        </button>

        <div class="slider-container-sldr">
          <div class="slider-sldr" id="slider-sldr">
            <!-- محتوای اسلایدر به صورت داینامیک ساخته می‌شود -->
          </div>
        </div>

        <button class="nav-btn-sldr next-btn-sldr" id="nextBtn-sldr">
          <i class="fas fa-chevron-left"></i>
        </button>
      </div>

      <div class="auto-play-sldr">
        <label>
          <input type="checkbox" id="autoPlay-sldr" checked />
          پخش خودکار
        </label>
      </div>

      <div class="description-sldr">
        <p>
          گالری آثار هنری با توضیحات کامل - متن هر اثر همراه با تصویر جابجا
          می‌شود
        </p>
        <p class="current-position-sldr">
          اثر فعلی: <span id="currentCenter-sldr">نگارگر طبیعت</span>
        </p>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const sliderSldr = document.getElementById("slider-sldr");
        const prevBtnSldr = document.getElementById("prevBtn-sldr");
        const nextBtnSldr = document.getElementById("nextBtn-sldr");
        const autoPlayCheckboxSldr = document.getElementById("autoPlay-sldr");
        const currentCenterSpanSldr =
          document.getElementById("currentCenter-sldr");

        // اطلاعات آثار هنری
        const artworksSldr = [
          {
            id: 1,
            title: "نگارگر طبیعت",
            description:
              "اثری از کمال‌الملک - نقاشی رنگ روغن از مناظر طبیعی ایران",
            image: "images/slider1/sl1.webp",
          },
          {
            id: 2,
            title: "چهره‌پردازی",
            description: "پرتره‌ای از یک بانوی قاجاری با تکنیک آبرنگ",
            image: "images/slider1/sl2.webp",
          },
          {
            id: 3,
            title: "معماری اسلامی",
            description: "نمایی از مسجد شیخ لطف‌الله با طراحی هندسی پیچیده",
            image: "images/slider1/sl3.webp",
          },
          {
            id: 4,
            title: "خطاطی نستعلیق",
            description: "خوشنویسی شعر حافظ با قلم نی و مرکب",
            image: "images/slider1/sl4.webp",
          },
          {
            id: 5,
            title: "مینیاتور ایرانی",
            description: "صحنه‌ای از شاهنامه با رنگ‌های طبیعی و طلاکاری",
            image: "images/slider1/sl5.webp",
          },
          {
            id: 6,
            title: "طرح اسلیمی",
            description: "نقوش تزئینی اسلامی با الهام از طبیعت",
            image: "images/slider1/sl6.webp",
          },
          {
            id: 7,
            title: "فرش دستباف",
            description: "قالی کرمان با طرح لچک ترنج و رنگ‌های گیاهی",
            image: "images/slider1/sl7.webp",
          },
          {
            id: 8,
            title: "نگارگری مکتب اصفهان",
            description: "صحنه‌ای از باغ ایرانی با درختان سرو و جویبار",
            image: "images/slider1/sl8.webp",
          },
          {
            id: 9,
            title: "خاتم‌کاری",
            description: "هنر ترکیب چوب و استخوان با طرح‌های هندسی",
            image: "images/slider1/sl9.webp",
          },
          {
            id: 10,
            title: "مقواسازی",
            description: "تزئین صفحات کتاب با طلا و لاجورد",
            image: "images/slider1/sl10.webp",
          },
        ];

        let currentArtworksSldr = [0, 1, 2, 3, 4, 5, 6]; // حالا 7 اندیس داریم
        let autoSlideIntervalSldr;
        let isAnimatingSldr = false;

        // مقداردهی اولیه اسلایدر
        initializeSliderSldr();

        function initializeSliderSldr() {
          // ایجاد 7 قاب اولیه
          for (let i = 0; i < 7; i++) {
            createFrameSldr(i);
          }
          updateCurrentTitleSldr();
        }

        function createFrameSldr(index) {
          const frame = document.createElement("div");
          frame.className = "frame-sldr";
          if (index === 0 || index === 6) {
            frame.classList.add("thin-frame-sldr");
          }
          frame.setAttribute("data-position", index + 1);

          const artwork = artworksSldr[currentArtworksSldr[index]];

          frame.innerHTML = `
                    <div class="frame-content-sldr">
                        <img src="${artwork.image}" alt="${artwork.title}" class="frame-image-sldr">
                        <div class="image-text-sldr">
                            <h3>${artwork.title}</h3>
                            <p>${artwork.description}</p>
                        </div>
                    </div>
                `;

          sliderSldr.appendChild(frame);
        }

        // حرکت به اسلاید بعدی
        function nextSlideSldr() {
          if (isAnimatingSldr) return;
          isAnimatingSldr = true;

          // انیمیشن خروج عکس‌ها و متن‌ها قبل از تغییر محتوا
          animateExitSldr("next");

          setTimeout(() => {
            // حذف اولین اثر و اضافه کردن اثر بعدی
            currentArtworksSldr.shift();
            let nextIndex =
              currentArtworksSldr[currentArtworksSldr.length - 1] + 1;
            if (nextIndex >= artworksSldr.length) nextIndex = 0;
            currentArtworksSldr.push(nextIndex);

            // انیمیشن حرکت آثار
            animateSlidesSldr("next");

            setTimeout(() => {
              updateSliderSldr();
              updateCurrentTitleSldr();
              isAnimatingSldr = false;
            }, 400);
          }, 500);
        }

        // حرکت به اسلاید قبلی
        function prevSlideSldr() {
          if (isAnimatingSldr) return;
          isAnimatingSldr = true;

          // انیمیشن خروج عکس‌ها و متن‌ها قبل از تغییر محتوا
          animateExitSldr("prev");

          setTimeout(() => {
            // حذف آخرین اثر و اضافه کردن اثر قبلی
            currentArtworksSldr.pop();
            let prevIndex = currentArtworksSldr[0] - 1;
            if (prevIndex < 0) prevIndex = artworksSldr.length - 1;
            currentArtworksSldr.unshift(prevIndex);

            // انیمیشن حرکت آثار
            animateSlidesSldr("prev");

            setTimeout(() => {
              updateSliderSldr();
              updateCurrentTitleSldr();
              isAnimatingSldr = false;
            }, 400);
          }, 500);
        }

        // انیمیشن خروج عکس‌ها و متن‌ها
        function animateExitSldr(direction) {
          const images = document.querySelectorAll(".frame-image-sldr");
          const textElements = document.querySelectorAll(".image-text-sldr");

          // انیمیشن خروج برای عکس‌ها
          images.forEach((img, index) => {
            img.classList.remove("image-exit-sldr");
            void img.offsetWidth;
            img.classList.add("image-exit-sldr");
          });

          // انیمیشن خروج برای متن‌ها
          textElements.forEach((text, index) => {
            text.classList.remove(
              "center-text-animation-sldr",
              "side-text-animation-sldr",
              "center-text-exit-sldr",
              "side-text-exit-sldr"
            );

            if (index === 3) {
              // حالا تصویر وسطی در موقعیت 4 است (ایندکس 3)
              text.classList.add("center-text-exit-sldr");
            } else if (index !== 0 && index !== 6) {
              // متن‌های قاب‌های باریک مخفی هستند
              text.classList.add("side-text-exit-sldr");
            }
          });
        }

        // انیمیشن حرکت آثار
        function animateSlidesSldr(direction) {
          const frameImages = document.querySelectorAll(".frame-image-sldr");
          const frameContents = document.querySelectorAll(
            ".frame-content-sldr"
          );

          frameContents.forEach((content, index) => {
            const img = content.querySelector(".frame-image-sldr");
            img.classList.remove("image-moving-sldr", "image-entering-sldr");

            // محاسبه حرکت و مقیاس برای 7 قاب
            let moveX, startScale, endScale;

            if (direction === "next") {
              moveX = "100%";
              // تنظیم مقیاس برای هر قاب
              if (index === 3) {
                // قاب وسطی
                startScale = 1.05;
                endScale = 1;
              } else if (index === 4) {
                // قاب سمت راست وسطی
                startScale = 1;
                endScale = 1.05;
              } else {
                startScale = 1;
                endScale = 1;
              }
            } else {
              moveX = "-100%";
              if (index === 2) {
                // قاب سمت چپ وسطی
                startScale = 1;
                endScale = 1.05;
              } else if (index === 3) {
                // قاب وسطی
                startScale = 1.05;
                endScale = 1;
              } else {
                startScale = 1;
                endScale = 1;
              }
            }

            img.style.setProperty("--move-x-sldr", moveX);
            img.style.setProperty("--start-scale-sldr", startScale);
            img.style.setProperty("--end-scale-sldr", endScale);

            setTimeout(() => {
              img.classList.add("image-moving-sldr");
            }, index * 80);
          });
        }

        // به‌روزرسانی اسلایدر
        function updateSliderSldr() {
          const frames = document.querySelectorAll(".frame-sldr");

          frames.forEach((frame, index) => {
            const artwork = artworksSldr[currentArtworksSldr[index]];
            const frameContent = frame.querySelector(".frame-content-sldr");

            frameContent.innerHTML = `
                        <img src="${artwork.image}" alt="${artwork.title}" class="frame-image-sldr">
                        <div class="image-text-sldr">
                            <h3>${artwork.title}</h3>
                            <p>${artwork.description}</p>
                        </div>
                    `;

            // اضافه کردن انیمیشن به عکس‌ها
            const imageElement =
              frameContent.querySelector(".frame-image-sldr");
            if (index === 3) {
              imageElement.classList.add("center-image-enter-sldr");
            } else if (index !== 0 && index !== 6) {
              imageElement.classList.add("side-image-enter-sldr");
            }

            // اضافه کردن انیمیشن به متن‌ها
            const textElement = frameContent.querySelector(".image-text-sldr");
            if (index === 3) {
              textElement.classList.add("center-text-animation-sldr");
            } else if (index !== 0 && index !== 6) {
              textElement.classList.add("side-text-animation-sldr");
            }
          });
        }

        // به‌روزرسانی عنوان اثر فعلی
        function updateCurrentTitleSldr() {
          const centerArtwork = artworksSldr[currentArtworksSldr[3]]; // موقعیت 4 (ایندکس 3)
          currentCenterSpanSldr.textContent = centerArtwork.title;

          currentCenterSpanSldr.style.animation = "none";
          setTimeout(() => {
            currentCenterSpanSldr.style.animation =
              "textFadeIn-sldr 0.6s ease-out";
          }, 10);
        }

        // شروع پخش خودکار
        function startAutoSlideSldr() {
          autoSlideIntervalSldr = setInterval(nextSlideSldr, 10000);
        }

        // توقف پخش خودکار
        function stopAutoSlideSldr() {
          clearInterval(autoSlideIntervalSldr);
        }

        // رویدادهای کلیک
        nextBtnSldr.addEventListener("click", function () {
          nextSlideSldr();
          if (autoPlayCheckboxSldr.checked) {
            stopAutoSlideSldr();
            startAutoSlideSldr();
          }
        });

        prevBtnSldr.addEventListener("click", function () {
          prevSlideSldr();
          if (autoPlayCheckboxSldr.checked) {
            stopAutoSlideSldr();
            startAutoSlideSldr();
          }
        });

        // کنترل پخش خودکار
        autoPlayCheckboxSldr.addEventListener("change", function () {
          if (this.checked) {
            startAutoSlideSldr();
          } else {
            stopAutoSlideSldr();
          }
        });

        // توقف پخش خودکار هنگام هاور
        const sliderWrapperSldr = document.querySelector(
          ".slider-wrapper-sldr"
        );
        sliderWrapperSldr.addEventListener("mouseenter", stopAutoSlideSldr);
        sliderWrapperSldr.addEventListener("mouseleave", function () {
          if (autoPlayCheckboxSldr.checked) {
            startAutoSlideSldr();
          }
        });

        // شروع پخش خودکار
        startAutoSlideSldr();
      });
    </script>
  </body>
</html>
