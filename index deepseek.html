<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>مکعب چرخان با وجه‌های مستطیلی</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #8B7355 url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%237a6349"/><path d="M0 0L100 100M100 0L0 100" stroke="%236a5539" stroke-width="1"/></svg>');
      color: white;
      min-height: 100vh;
      display: flex;
      overflow: hidden;
      padding: 20px;
    }
    
    .container {
      display: flex;
      width: 100%;
      max-width: 1600px;
      margin: 0 auto;
      gap: 40px;
    }
    
    .gallery-sidebar {
      width: 280px;
      display: flex;
      flex-direction: column;
      gap: 25px;
      padding: 20px 0;
    }
    
    .thumbnail {
      width: 100%;
      height: 180px;
      border-radius: 8px;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.4s ease;
      border: 3px solid transparent;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
      position: relative;
    }
    
    .thumbnail.active {
      transform: scale(1.15);
      border-color: #ffd700;
      box-shadow: 0 0 30px rgba(255, 215, 0, 0.7);
      z-index: 10;
    }
    
    .thumbnail img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .thumbnail::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.4);
      transition: all 0.3s ease;
    }
    
    .thumbnail.active::after {
      background: rgba(0, 0, 0, 0.1);
    }
    
    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    
    .header {
      text-align: center;
      margin-bottom: 50px;
      z-index: 10;
    }
    
    h1 {
      font-size: 2.8rem;
      margin-bottom: 15px;
      text-shadow: 0 3px 15px rgba(0, 0, 0, 0.6);
      color: #fff;
    }
    
    .subtitle {
      font-size: 1.3rem;
      opacity: 0.9;
    }
    
    .scene {
      width: 900px;
      height: 500px;
      perspective: 1500px;
      margin: 0 auto 50px;
      position: relative;
    }
    
    .cube {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transform: rotateX(-10deg) rotateY(20deg);
      animation: rotate 25s infinite linear;
    }
    
    .cube-face {
      position: absolute;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      backface-visibility: visible;
    }
    
    /* قاب دیواری برای هر عکس - ابعاد یکسان برای همه وجه‌ها */
    .picture-frame {
      position: relative;
      background: #8d6e63;
      box-shadow: 
        inset 0 0 40px rgba(0, 0, 0, 0.4),
        0 10px 40px rgba(0, 0, 0, 0.6);
      border: 20px solid #5d4037;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 600px;  /* عرض یکسان برای همه وجه‌ها */
      height: 400px; /* ارتفاع یکسان برای همه وجه‌ها */
    }
    
    .picture-frame::before {
      content: '';
      position: absolute;
      top: -8px;
      left: -8px;
      right: -8px;
      bottom: -8px;
      border: 8px solid #a1887f;
      z-index: -1;
    }
    
    .picture-frame::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(0,0,0,0.2) 100%);
      pointer-events: none;
    }
    
    .cube-face img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }
    
    .cube-face:hover img {
      transform: scale(1.03);
    }
    
    /* موقعیت‌های وجه‌های مکعب - همه ابعاد یکسان */
    .front {
      transform: rotateY(0deg) translateZ(300px);
    }
    
    .back {
      transform: rotateY(180deg) translateZ(300px);
    }
    
    .right {
      transform: rotateY(90deg) translateZ(300px);
    }
    
    .left {
      transform: rotateY(-90deg) translateZ(300px);
    }
    
    /* انیمیشن چرخش مکعب */
    @keyframes rotate {
      0% {
        transform: rotateX(-10deg) rotateY(0deg);
      }
      25% {
        transform: rotateX(-10deg) rotateY(90deg);
      }
      50% {
        transform: rotateX(-10deg) rotateY(180deg);
      }
      75% {
        transform: rotateX(-10deg) rotateY(270deg);
      }
      100% {
        transform: rotateX(-10deg) rotateY(360deg);
      }
    }
    
    .controls {
      display: flex;
      gap: 25px;
      margin-top: 30px;
    }
    
    .control-btn {
      background: rgba(139, 115, 85, 0.8);
      border: 2px solid rgba(255, 255, 255, 0.5);
      color: white;
      padding: 14px 30px;
      border-radius: 50px;
      cursor: pointer;
      font-size: 1.1rem;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }
    
    .control-btn:hover {
      background: rgba(165, 135, 95, 0.9);
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
    }
    
    .view-options {
      display: flex;
      gap: 20px;
      margin-top: 25px;
    }
    
    .view-btn {
      background: rgba(139, 115, 85, 0.6);
      border: 2px solid rgba(255, 255, 255, 0.4);
      color: white;
      padding: 10px 20px;
      border-radius: 25px;
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.3s ease;
    }
    
    .view-btn.active {
      background: rgba(205, 170, 125, 0.9);
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.6);
    }
    
    /* اطلاعات تصویر */
    .image-info {
      position: absolute;
      bottom: -40px;
      left: 0;
      right: 0;
      text-align: center;
      background: rgba(0, 0, 0, 0.6);
      padding: 10px;
      border-radius: 8px;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .cube-face:hover .image-info {
      opacity: 1;
    }
    
    /* ریسپانسیو */
    @media (max-width: 1400px) {
      .container {
        flex-direction: column;
        align-items: center;
        gap: 30px;
      }
      
      .gallery-sidebar {
        width: 100%;
        flex-direction: row;
        justify-content: center;
        order: 2;
        padding: 10px 0;
      }
      
      .thumbnail {
        width: 180px;
        height: 120px;
      }
      
      .scene {
        width: 700px;
        height: 400px;
        order: 1;
        margin-bottom: 30px;
      }
      
      .picture-frame {
        width: 450px;
        height: 300px;
      }
      
      .front, .back, .right, .left {
        transform: rotateY(var(--ry)) translateZ(225px);
      }
    }
    
    @media (max-width: 900px) {
      .scene {
        width: 550px;
        height: 350px;
      }
      
      .picture-frame {
        width: 350px;
        height: 233px;
      }
      
      .front, .back, .right, .left {
        transform: rotateY(var(--ry)) translateZ(175px);
      }
      
      h1 {
        font-size: 2.2rem;
      }
      
      .gallery-sidebar {
        gap: 15px;
      }
      
      .thumbnail {
        width: 150px;
        height: 100px;
      }
    }
    
    @media (max-width: 600px) {
      .scene {
        width: 400px;
        height: 250px;
      }
      
      .picture-frame {
        width: 250px;
        height: 167px;
        border-width: 15px;
      }
      
      .front, .back, .right, .left {
        transform: rotateY(var(--ry)) translateZ(125px);
      }
      
      h1 {
        font-size: 1.8rem;
      }
      
      .controls {
        flex-direction: column;
        gap: 15px;
      }
      
      .gallery-sidebar {
        flex-wrap: wrap;
      }
      
      .thumbnail {
        width: 130px;
        height: 90px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="gallery-sidebar">
      <div class="thumbnail active" data-face="front">
        <img src="https://picsum.photos/id/1015/800/600" alt="تصویر ۱">
      </div>
      <div class="thumbnail" data-face="right">
        <img src="https://picsum.photos/id/1016/800/600" alt="تصویر ۲">
      </div>
      <div class="thumbnail" data-face="back">
        <img src="https://picsum.photos/id/1018/800/600" alt="تصویر ۳">
      </div>
      <div class="thumbnail" data-face="left">
        <img src="https://picsum.photos/id/1020/800/600" alt="تصویر ۴">
      </div>
    </div>
    
    <div class="main-content">
      <div class="header">
        <h1>گالری مکعب سه‌بعدی</h1>
        <p class="subtitle">چهار وجه مستطیلی با ابعاد یکسان</p>
      </div>
      
      <div class="scene">
        <div class="cube" id="cube">
          <div class="cube-face front">
            <div class="picture-frame">
              <img src="https://picsum.photos/id/1015/800/600" alt="تصویر ۱">
              <div class="image-info">طبیعت کوهستانی - 800x600</div>
            </div>
          </div>
          <div class="cube-face right">
            <div class="picture-frame">
              <img src="https://picsum.photos/id/1016/800/600" alt="تصویر ۲">
              <div class="image-info">جنگل سرسبز - 800x600</div>
            </div>
          </div>
          <div class="cube-face back">
            <div class="picture-frame">
              <img src="https://picsum.photos/id/1018/800/600" alt="تصویر ۳">
              <div class="image-info">کوهستان برفی - 800x600</div>
            </div>
          </div>
          <div class="cube-face left">
            <div class="picture-frame">
              <img src="https://picsum.photos/id/1020/800/600" alt="تصویر ۴">
              <div class="image-info">ساحل دریا - 800x600</div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="controls">
        <button class="control-btn" id="pauseBtn">توقف چرخش</button>
        <button class="control-btn" id="resumeBtn">ادامه چرخش</button>
        <button class="control-btn" id="reverseBtn">معکوس کردن</button>
      </div>
      
      <div class="view-options">
        <button class="view-btn active" data-speed="25">کند</button>
        <button class="view-btn" data-speed="15">متوسط</button>
        <button class="view-btn" data-speed="10">سریع</button>
      </div>
    </div>
  </div>

  <script>
    // کنترل‌های مکعب
    const cube = document.getElementById('cube');
    const pauseBtn = document.getElementById('pauseBtn');
    const resumeBtn = document.getElementById('resumeBtn');
    const reverseBtn = document.getElementById('reverseBtn');
    const viewBtns = document.querySelectorAll('.view-btn');
    const thumbnails = document.querySelectorAll('.thumbnail');
    
    let isPaused = false;
    let isReversed = false;
    let rotationSpeed = 25;
    let currentFace = 'front';
    
    // توقف چرخش
    pauseBtn.addEventListener('click', () => {
      cube.style.animationPlayState = 'paused';
      isPaused = true;
    });
    
    // ادامه چرخش
    resumeBtn.addEventListener('click', () => {
      cube.style.animationPlayState = 'running';
      isPaused = false;
    });
    
    // معکوس کردن جهت چرخش
    reverseBtn.addEventListener('click', () => {
      isReversed = !isReversed;
      if (isReversed) {
        cube.style.animationDirection = 'reverse';
        reverseBtn.textContent = 'چرخش عادی';
      } else {
        cube.style.animationDirection = 'normal';
        reverseBtn.textContent = 'معکوس کردن';
      }
    });
    
    // تغییر سرعت چرخش
    viewBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        viewBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        rotationSpeed = parseInt(btn.getAttribute('data-speed'));
        cube.style.animationDuration = `${rotationSpeed}s`;
      });
    });
    
    // بروزرسانی وضعیت تصویر کوچک بر اساس وجه فعال
    function updateActiveThumbnail(face) {
      thumbnails.forEach(thumb => {
        thumb.classList.remove('active');
        if (thumb.getAttribute('data-face') === face) {
          thumb.classList.add('active');
        }
      });
    }
    
    // تشخیص وجه فعال با استفاده از موقعیت چرخش
    function getActiveFace() {
      const transform = cube.style.transform || getComputedStyle(cube).transform;
      const matrix = new DOMMatrixReadOnly(transform);
      const angle = Math.atan2(matrix.m21, matrix.m11) * (180 / Math.PI);
      const normalizedAngle = (angle + 360) % 360;
      
      if (normalizedAngle >= 315 || normalizedAngle < 45) return 'front';
      if (normalizedAngle >= 45 && normalizedAngle < 135) return 'left';
      if (normalizedAngle >= 135 && normalizedAngle < 225) return 'back';
      if (normalizedAngle >= 225 && normalizedAngle < 315) return 'right';
      
      return 'front';
    }
    
    // بررسی دوره‌ای وضعیت وجه فعال
    setInterval(() => {
      if (!isPaused) {
        const activeFace = getActiveFace();
        if (activeFace !== currentFace) {
          currentFace = activeFace;
          updateActiveThumbnail(activeFace);
        }
      }
    }, 100);
    
    // کلیک روی تصاویر کوچک برای چرخش مستقیم به آن وجه
    thumbnails.forEach(thumb => {
      thumb.addEventListener('click', () => {
        const face = thumb.getAttribute('data-face');
        let targetAngle;
        
        switch(face) {
          case 'front': targetAngle = 0; break;
          case 'right': targetAngle = 90; break;
          case 'back': targetAngle = 180; break;
          case 'left': targetAngle = 270; break;
        }
        
        // توقف انیمیشن و تنظیم چرخش دستی
        cube.style.animation = 'none';
        cube.style.transform = `rotateX(-10deg) rotateY(${targetAngle}deg)`;
        
        // بروزرسانی وضعیت فعال
        updateActiveThumbnail(face);
        currentFace = face;
        
        // ازسرگیری انیمیشن پس از 3 ثانیه
        setTimeout(() => {
          cube.style.animation = `rotate ${rotationSpeed}s infinite linear`;
          if (isPaused) {
            cube.style.animationPlayState = 'paused';
          }
          if (isReversed) {
            cube.style.animationDirection = 'reverse';
          }
        }, 3000);
      });
    });
    
    // کنترل با کیبورد
    document.addEventListener('keydown', (e) => {
      if (e.code === 'Space') {
        e.preventDefault();
        if (isPaused) {
          cube.style.animationPlayState = 'running';
          isPaused = false;
        } else {
          cube.style.animationPlayState = 'paused';
          isPaused = true;
        }
      }
    });
    
    // مقداردهی اولیه
    updateActiveThumbnail('front');
  </script>
</body>
</html>